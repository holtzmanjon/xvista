#include "Vista.h"
       SUBROUTINE TIMEHEAD(PHOTDATA,IPASS)

#ifdef VMS
       INCLUDE 'VINCLUDE:VISTALINK.INC'
       INCLUDE 'VINCLUDE:PHOTFILES.INC'
#else
       INCLUDE 'vistadisk/source/include/vistalink.inc'
       INCLUDE 'vistadisk/source/include/photfiles.inc'
#endif
       REAL*4 PHOTDATA(NUMDATA)
       INTEGER IPASS    
       CHARACTER TSTRING*80

       TSTRING = ' '
       CALL CCCHEAD('RA',HEADBUF(1,IPASS),TSTRING)
       PHOTDATA(TRIALRA) = TIMEEXTRACT(TSTRING)*15.
       PHOTDATA(CALCRA) = PHOTDATA(TRIALRA)
       TSTRING = ' '
       CALL CCCHEAD('DEC',HEADBUF(1,IPASS),TSTRING)
       PHOTDATA(TRIALDEC) = TIMEEXTRACT(TSTRING) 
       PHOTDATA(CALCDEC) = PHOTDATA(TRIALDEC)
       TSTRING = ' '
       CALL CCCHEAD('HA',HEADBUF(1,IPASS),TSTRING)
       PHOTDATA(HOURANGLE) = TIMEEXTRACT(TSTRING) *15.

       RETURN
       END

       FUNCTION TIMEEXTRACT(TSTRING)

       CHARACTER *(*) TSTRING

       L = INDEX(TSTRING,':')
       READ(TSTRING(1:L-1),*) IHR
       LL = INDEX(TSTRING(L+1:),':')
       READ(TSTRING(L+1:LL-1),*) IMIN
       READ(TSTRING(LL+1:),*) ISEC

       TIMEEXTRACT = IHR+(IMIN/60.)+(ISEC/3600.)
       TIMEEXTRACT = TIMEEXTRACT*(3.14159265358979/180.)

       RETURN
       END 

