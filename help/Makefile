#    ********* DO NOT EDIT THIS FILE *********
#  It is automatically generated and your changes will not be used! 
MACHINE=macosx
CPP=/usr/bin/cpp
INCCPP=/usr/bin/cpp
FPP=for
CPPFLAGS=-DX11_exists -I/usr/X11/include -traditional -P
CC=cc
CFLAGS=-O -DX11_exists -I/usr/X11/include -DFORT -DUNIX -I/usr/include/bsd -I/sw/include
FC=gfortran
FFLAGS=-O -ffixed-line-length-132 
LD=gfortran
LDFLAGS=-L/sw/lib
RM=rm
AR=ar
DX11=-DX11_exists -I/usr/X11/include
X11DEV=x11_.o x11.o xgets.o trackbox.o
LX11DEV=$(MLIB)(x11_.o) $(MLIB)(x11.o) $(MLIB)(xgets.o) $(MLIB)(trackbox.o)
X11LIB=-L/usr/X11/lib64 -L/usr/X11/lib -lX11
SUNIEEE=
OPTFLAG=
BSTATIC=-lgcc
DOOBJS=$(LOBJS)
MAR=
MRM=$(RM) *.o
LREADLINE=
WCSLIB=
default: 
	echo lynx already exists on your machine
	ln -s /sw/bin/lynx ../bin/lynx.macosx

lynx: unpack doconfigure ../lynx2-8/lynx.$(MACHINE) install-clean

unpack: 
	(cd ../lynx ; gunzip lynx2-8a.tar.gz)
	(cd .. ; tar xvf lynx/lynx2-8a.tar)
	(cd ../lynx ; gzip lynx2-8a.tar)
	touch unpack

doconfigure: datefile.$(MACHINE)

../lynx2-8/lynx.$(MACHINE):
	(cd ../lynx2-8 ; make -k)

install-clean:
	rm -f ../bin/lynx.$(MACHINE)
	-mv ../lynx2-8/lynx ../lynx2-8/lynx.$(MACHINE)
	cp ../lynx2-8/lynx.cfg ../help/
	ln -s ../lynx2-8/lynx.$(MACHINE) ../bin/lynx.$(MACHINE)
	(cd ../lynx2-8 ; make -k clean)

datefile.$(MACHINE):
	rm -f datefile* ./configure.vista
	echo "#!/bin/sh" >./configure.vista
	echo "CC=$(CC)" >>./configure.vista
#	tail +2l ../lynx2-8/configure >>./configure.vista
	tail --lines=+2 ../lynx2-8/configure >>./configure.vista
	chmod a+x configure.vista
	mv configure.vista ../lynx2-8
	(cd ../lynx2-8 ; ./configure.vista --libdir $(PWD))
	date > datefile.$(MACHINE)

clean:
	rm -rf ../lynx2-8
	rm -f *.dvi *.log *.aux *.idx unpack

man-html:
	latex2html -no_navigation -info " " -address " " man

man-ps:
	latex man
	dvips man

